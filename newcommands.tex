%%%%% Units of measure
\DeclareSIUnit[number-unit-product = \;]\debye{D}
\DeclareSIUnit[number-unit-product = \;]\au{a.u.}

%%%%% URLs
\newcommand{\GitHub}{\href{https://github.com/robertodr}{GitHub}~}
\newcommand{\GitLab}{\href{https://gitlab.com/u/robertodr}{GitLab}~}
\newcommand{\pcmsolver}{\href{http://pcmsolver.readthedocs.io}{\textsc{PCMSolver}}~}
\newcommand{\psicode}{\href{http://www.psicode.org}{\textsc{Psi4}}~}
\newcommand{\DIRAC}{\href{http://www.diracprogram.org}{\textsc{DIRAC}}~}
\newcommand{\DALTON}{\href{http://www.daltonprogram.org}{\textsc{Dalton}}~}
\newcommand{\LSDALTON}{\href{http://www.daltonprogram.org}{\textsc{LSDalton}}~}
\newcommand{\ReSpect}{\href{http://respect.readthedocs.io/}{\textsc{ReSpect}}~}
\newcommand{\git}{\href{https://git-scm.com/}{\texttt{git}}~}
\newcommand{\cmake}{\href{https://cmake.org/}{\texttt{CMake}}~}
\newcommand{\readthedocs}{\href{https://readthedocs.org/}{Read The Docs}~}
\newcommand{\GPL}{\href{https://www.gnu.org/licenses/gpl.html}{GPL}~}
\newcommand{\LGPL}{\href{https://www.gnu.org/licenses/lgpl.html}{LGPL}~}

%%%%% General
\newcommand*{\diff}{\mathop{}\!\mathrm{d}} % Differential
\newcommand*{\Supp}{\mathop{}\!\mathrm{Supp}}
\newcommand*{\deriv}[3][]{% Derivative
\frac{\diff^{#1}#2}{\diff #3^{#1}}}
\newcommand*{\pderiv}[3][]{%
\frac{\partial^{#1}#2}% Partial derivative
{\partial #3^{#1}}}
\newcommand*{\vect}[1]{\symbf{#1}} % Vector
\newcommand*{\mat}[1]{\symbf{#1}}% Matrix
\newcommand*{\Tr}{\mathrm{Tr}}% Trace
\newcommand*{\supp}[1]{\Supp(#1)}
\newcommand*{\conv}{\mathop{}\!\mathrm{Conv}\,}
\newcommand*{\hull}{\mathop{}\!\mathrm{Hull}\,}
\newcommand*{\sing}{\mathop{}\!\mathrm{Sing}\,}
\newcommand*{\dist}{\mathop{}\!\mathrm{Dist}}
\newcommand*{\Span}[1]{\mathop{}\!\mathrm{Span}\{#1\}}
\newcommand*{\norm}[2]{\| #1 \|_{#2}}
\newcommand*{\paper}[1]{\textbf{Paper #1}}

%%%%% PCM stuff
\newcommand*{\diel}{\varepsilon} % Permittivity
\newcommand*{\diels}{\varepsilon_\mathrm{s}}
\newcommand*{\dield}{\varepsilon_\infty}
\newcommand*{\bi}[1]{\hat{\mathcal{#1}}} % Boundary integral operator
\newcommand*{\PCM}{\bi{Y}} % The PCM boundary integral operator
\newcommand*{\MM}{\bi{W}} % The MM classical matrix
\newcommand*{\MMPCM}{\bi{X}} % The MM/PCM interaction kernel
\newcommand*{\scalprod}[3][\Gamma]{\left(#2, #3\right)_{#1}} % Scalar product
\newcommand*{\s}{\mathrm{s}} % Sources
\newcommand*{\p}{\mathrm{p}} % Polarization degree of freedom
\newcommand*{\V}{\mathbb{V}} % Supermatrix
\newcommand*{\asc}{\sigma} % ASC
\newcommand*{\esp}{\varphi} % MEP
\newcommand*{\Ylm}[4]{\mathcal{Y}_{#1}^{#2}(#3, #4)}
\newcommand*{\BarYlm}[4]{\overline{\mathcal{Y}}_{#1}^{#2}(#3, #4)}
\newcommand*{\Li}{L_\mathrm{i}}
\newcommand*{\ui}{u_\mathrm{i}}
\newcommand*{\rhoi}{\rho_\mathrm{i}}
\newcommand*{\Omegai}{\Omega_\mathrm{i}}
\newcommand*{\partiali}{\partial_{L_\mathrm{i}}}
\newcommand*{\Gi}{G_\mathrm{i}(\vect{r}, \vect{r}^\prime)}
\newcommand*{\Le}{L_\mathrm{e}}
\newcommand*{\ue}{u_\mathrm{e}}
\newcommand*{\rhoe}{\rho_\mathrm{e}}
\newcommand*{\Omegae}{\Omega_\mathrm{e}}
\newcommand*{\partiale}{\partial_{L_\mathrm{e}}}
\newcommand*{\Ge}{G_\mathrm{e}(\vect{r}, \vect{r}^\prime)}

%%%%% Response theory stuff
\newcommand*{\aveQ}{\left\lbrace Q(t)\right\rbrace_T}% Time-averaged quasi-energy
\newcommand*{\response}[3]{\Braket{\Braket{#1; #2}}_{#3}}% Response function
\newcommand*{\pertmat}[1]{\tilde{\mat{#1}}}
\newcommand*{\aveL}{\lbrace\tilde{L}(\pertmat{C}, \pertmat{\lambda}, \tilde{\sigma}, t)\rbrace_T}% Time-averaged quasi-energy
\newcommand*{\aveLa}{\lbrace\tilde{L}^a(\pertmat{C}, \pertmat{\lambda}, \tilde{\sigma}, t)\rbrace_T}% Time-averaged quasi-energy
\newcommand*{\pertPCM}[1]{\PCM^{(#1)}}
\newcommand*{\eqtr}{\overset{\Tr}{=}}
\newcommand*{\eqavetr}{\overset{\lbrace\Tr\rbrace_T}{=}}
\newcommand*{\herm}[1]{\left[#1\right]^{\oplus}}
\newcommand*{\aherm}[1]{\left[#1\right]^{\ominus}}
\newcommand*{\hermitian}[1]{\mat{#1} + \mat{#1}^\dagger}
\newcommand*{\ahermitian}[1]{\mat{#1} - \mat{#1}^\dagger}
\newcommand*{\breveFock}[1]{\breve{\mat{\mathcal{F}}}_\omega^{#1}}
\newcommand*{\rspParam}[1]{\mat{X}^{#1}}
\newcommand*{\RHS}[1]{\mat{M}_\mathrm{RHS}^{#1}}
\newcommand*{\Dp}[1]{\mat{D}_\mathrm{P}^{#1}}
\newcommand*{\Dh}[1]{\mat{D}_\mathrm{H}^{#1}}
\newcommand*{\ASCp}[1]{\asc_\mathrm{P}^{#1}}
\newcommand*{\ASCh}[1]{\asc_\mathrm{H}^{#1}}
\newcommand*{\Gn}[1]{\mathcal{G}^{0, #1}}
\newcommand*{\Gderiv}[2]{\mat{\mathcal{G}}^{#1, #2}}
\newcommand*{\genHessian}{\mat{E}^{[2]}}
\newcommand*{\genMetric}{\mat{S}^{[2]}}

%%%%% Coupled cluster stuff
\newcommand*{\commutator}[3][]{[ #2, #3 ]^{#1}} % Commutator
\newcommand*{\anticommutator}[2]{% Anticommutator
[ #1, #2 ]_{+}}
\newcommand*{\lag}[1]{\mathcal{L}^\mathcal{#1}_\mathrm{eff}}
\newcommand*{\expo}[1]{\mathrm{e}^{#1}}
\newcommand*{\twoel}[2]{\Braket{#1 \| #2}}
\newcommand*{\tamp}[1]{t_{#1}} % Cluster amplitude
\newcommand*{\tampEq}[1]{\Omega_{#1}} % Cluster amplitude vector function
\newcommand*{\sd}[1]{{}^*#1}
\newcommand*{\tbar}[1]{\bar{t}_{#1}} % Multiplier
\newcommand*{\tbarEq}[1]{\bar{\Omega}_{#1}} % Multiplier vector function
\newcommand*{\cluster}[1]{\tau_{#1}} % Cluster operator
\newcommand*{\denom}[1]{\epsilon_{#1}} % Energy denominator
\newcommand*{\cons}[1]{a_{#1}^{\dagger}}% Constructor operator
\newcommand*{\anni}[1]{a_{#1}} % Annihilation operator
\newcommand*{\sigmaEq}{\Omega^{\sigma}} % Multiplier vector function
\newcommand*{\BCH}[2]{#1+\commutator{#1}{#2}+\frac{1}{2}\commutator{\commutator{#1}{#2}}{#2}
+ \ldots} % BCH expansion up to second order
\newcommand*{\BCHfirst}[2]{\commutator{#1}{#2}}% BCH 1st order
\newcommand*{\BCHsecond}[2]{\frac{1}{2}\commutator{\commutator{#1}{#2}}{#2}}% BCH 2nd order
\newcommand*{\BCHthird}[2]{\frac{1}{6}\commutator{\commutator{\commutator{#1}{#2}}{#2}}{#2}} %BCH 3rd order
% BCH 4th order
\newcommand*{\BCHfourth}[2]{\frac{1}{24}\commutator{\commutator{\commutator{\commutator{#1}{#2}}{#2}}{#2}}{#2}}
% \Phi
\newcommand*{\RTerm}[3]{{}^{#1}R^{#2}_{#3}}
\newcommand*{\STerm}[3]{{}^{#1}S^{#2}_{#3}}
\newcommand*{\UTerm}[4]{{}^{#1}U^{#2}_{#3 #4}}
% \esp
\newcommand*{\MEPRTerm}[3]{{}^{#1}\underline{R}^{#2}_{#3}}
\newcommand*{\MEPSTerm}[3]{{}^{#1}\underline{S}^{#2}_{#3}}
\newcommand*{\MEPUTerm}[4]{{}^{#1}\underline{U}^{#2}_{#3 #4}}

% Box around equation
\newcommand{\highlight}[2]{%
  \colorbox{#1!50}{$\displaystyle#2$}}
% Color terms in equations
\newcommand*{\mathcolor}{}
\def\mathcolor#1#{\mathcoloraux{#1}}
\newcommand*{\mathcoloraux}[3]{%
  \protect\leavevmode
    \begingroup
        \color#1{#2}#3%
          \endgroup
}

% Theorem environments
%%% Definitions
\newtheoremstyle{classicdef}%             % Name
  {12pt}%                                 % Space above
  {12pt}%                                 % Space below
  {}%                                     % Body font
  {}%                                     % Indent amount
  {\bfseries\scshape}%                    % Theorem head font
  {.}%                                    % Punctuation after theorem head
  { }%                                    % Space after theorem head, ' ', or \newline
  {\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}%

%%% Theorems, Lemmas, Corollaries
\newtheoremstyle{classicthm}%             % Name
  {12pt}%                                 % Space above
  {12pt}%                                 % Space below
  {\itshape}%                             % Body font
  {}%                                     % Indent amount
  {\bfseries\scshape}%                    % Theorem head font
  {.}%                                    % Punctuation after theorem head
  { }%                                    % Space after theorem head, ' ', or \newline
  {\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}%

\theoremstyle{classicthm}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{proposition}{Proposition}
\newtheorem*{corollary}{Corollary}
\newtheorem{postulate}{Postulate}

\theoremstyle{classicdef}
\newtheorem{defin}{Definition}
\newtheorem{conjecture}{Conjecture}
\newtheorem{example}{Example}

\theoremstyle{remark}
\newtheorem*{rem}{Remark}
\newtheorem*{note}{Note}
\newtheorem{case}{Case}

\newenvironment{Proof}{\vspace*{1.5pt}\begin{proof} \small{}}{\end{proof}\vspace*{1.5pt}}
\renewenvironment{example}[1][]{\subparagraph*{Example} #1 \small{}}{}

